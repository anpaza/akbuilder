#!/bin/sh
# for convenience, make a link to this file in root project directory
# (where GNUmakefile is located), or run directly as build/X92/deploy.

OUT=out/X92/

function build() {
	make bootfiles BOOTIMG.FILE=boot-$1.img KERNEL.DTS=$2 \
	    || exit $?

	OUTD=${OUT}deploy/$1/
	mkdir -p ${OUTD}
	mv -f ${OUT}{aml_autoscript,boot-$1.img,dtb.img} ${OUTD}
	cp build/X92/{README-boot*.txt,CHANGES*.txt} ${OUTD}
}

build 2G gxm_x92_2g.dts
build 3G gxm_x92_3g.dts

make ${OUT}aml_autoscript PLATFORM.UBOOT_AUTOSCRIPT=build/X92/uboot-script-libreelec.txt \
	|| exit $?
OUTD=${OUT}deploy/autoboot/
mkdir -p ${OUTD}
mv -f ${OUT}aml_autoscript ${OUTD}
cp build/X92/README-autoboot*.txt ${OUTD}
